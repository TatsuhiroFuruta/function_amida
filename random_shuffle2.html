<script>
/**
 * 配列の要素をランダムにシャッフルし、新しい配列として返す (非破壊的)
 * @param {Array} originalArray シャッフルする元の配列
 * @returns {Array} シャッフルされた新しい配列
 */
function shuffleArray(originalArray) {
    // スプレッド構文を使って配列のシャローコピーを作成
    // const array = [...originalArray];
    const array = new array(...originalArray);

    for (let i = array.length - 1; i > 0; i--) {
        // 0 から i までのランダムなインデックス j を生成
        const j = Math.floor(Math.random() * (i + 1));

        // 要素 array[i] と array[j] を入れ替える
        [array[i], array[j]] = [array[j], array[i]];
    }

    return array; // コピーした新しい配列を返す
}

// 使用例は上記と同じ
// 使用例
const originalNumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
console.log("オリジナル (シャッフル前):", originalNumbers);

// 新しい変数にシャッフル結果を代入
const shuffledNumbers = shuffleArray(originalNumbers);

console.log("シャッフルされた新しい配列:", shuffledNumbers);
console.log("オリジナル (変更なしを確認):", originalNumbers);
</script>